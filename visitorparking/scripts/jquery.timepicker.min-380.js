!function (e) { "function" == typeof define && define.amd ? define(["jquery"], e) : e(jQuery) }(function (e) { function i(e) { if (e.minTime && (e.minTime = k(e.minTime)), e.maxTime && (e.maxTime = k(e.maxTime)), e.durationTime && "function" != typeof e.durationTime && (e.durationTime = k(e.durationTime)), e.disableTimeRanges.length > 0) { for (var i in e.disableTimeRanges) e.disableTimeRanges[i] = [k(e.disableTimeRanges[i][0]), k(e.disableTimeRanges[i][1])]; e.disableTimeRanges = e.disableTimeRanges.sort(function (e, i) { return e[0] - i[0] }); for (var i = e.disableTimeRanges.length - 1; i > 0; i--) e.disableTimeRanges[i][0] > e.disableTimeRanges[i - 1][1] || (e.disableTimeRanges[i - 1] = [Math.min(e.disableTimeRanges[i][0], e.disableTimeRanges[i - 1][0]), Math.max(e.disableTimeRanges[i][1], e.disableTimeRanges[i - 1][1])], e.disableTimeRanges.splice(i, 1)) } return e } function t(i) { var t = i.data("timepicker-settings"), s = i.data("timepicker-list"); if (s && s.length && (s.remove(), i.data("timepicker-list", !1)), t.useSelect) { s = e("<select />", { "class": "ui-timepicker-select" }); var n = s } else { s = e("<ul />", { "class": "ui-timepicker-list" }); var n = e("<div />", { "class": "ui-timepicker-wrapper", tabindex: -1 }); n.css({ display: "none", position: "absolute" }).append(s) } if (t.noneOption) if (t.noneOption === !0 && (t.noneOption = t.useSelect ? "Time..." : "None"), e.isArray(t.noneOption)) for (var c in t.noneOption) { var u = a(t.noneOption[c], t.useSelect); s.append(u) } else { var u = a(t.noneOption, t.useSelect); s.append(u) } t.className && n.addClass(t.className), null === t.minTime && null === t.durationTime || !t.showDuration || n.addClass("ui-timepicker-with-duration"); var m = t.minTime; "function" == typeof t.durationTime ? m = k(t.durationTime()) : null !== t.durationTime && (m = t.durationTime); var d = null !== t.minTime ? t.minTime : 0, f = null !== t.maxTime ? t.maxTime : d + y - 1; f > d || (f += y), f === y - 1 && -1 !== t.timeFormat.indexOf("H") && (f = y); for (var T = t.disableTimeRanges, b = 0, w = T.length, c = d; f >= c; c += 60 * t.step) { var x = c, C = v(x, t.timeFormat); if (t.useSelect) { var R = e("<option />", { value: C }); R.text(C) } else { var R = e("<li />"); R.data("time", x > 86400 ? x % 86400 : x), R.text(C) } if ((null !== t.minTime || null !== t.durationTime) && t.showDuration) { var M = g(c - m); if (t.useSelect) R.text(R.text() + " (" + M + ")"); else { var S = e("<span />", { "class": "ui-timepicker-duration" }); S.text(" (" + M + ")"), R.append(S) } } w > b && (x < T[b][1] || (b += 1), T[b] && x >= T[b][0] && x < T[b][1] && (t.useSelect ? R.prop("disabled", !0) : R.addClass("ui-timepicker-disabled"))), s.append(R) } if (n.data("timepicker-input", i), i.data("timepicker-list", n), t.useSelect) s.val(r(i.val(), t)), s.on("focus", function () { e(this).data("timepicker-input").trigger("showTimepicker") }), s.on("blur", function () { e(this).data("timepicker-input").trigger("hideTimepicker") }), s.on("change", function () { p(i, e(this).val(), "select") }), i.hide().after(s); else { var D = t.appendTo; "string" == typeof D ? D = e(D) : "function" == typeof D && (D = D(i)), D.append(n), l(i, s), s.on("click", "li", function () { i.off("focus.timepicker"), i.on("focus.timepicker-ie-hack", function () { i.off("focus.timepicker-ie-hack"), i.on("focus.timepicker", H.show) }), o(i) || i[0].focus(), s.find("li").removeClass("ui-timepicker-selected"), e(this).addClass("ui-timepicker-selected"), h(i) && (i.trigger("hideTimepicker"), n.hide()) }) } } function a(i, t) { var a, r, s; return "object" == typeof i ? (a = i.label, r = i.className, s = i.value) : "string" == typeof i ? a = i : e.error("Invalid noneOption value"), t ? e("<option />", { value: s, "class": r, text: a }) : e("<li />", { "class": r, text: a }).data("time", s) } function r(i, t) { if (e.isNumeric(i) || (i = k(i)), null === i) return null; var a = 60 * t.step; return v(Math.round(i / a) * a, t.timeFormat) } function s() { return new Date(1970, 1, 1, 0, 0, 0) } function n(i) { var t = e(i.target), a = t.closest(".ui-timepicker-input"); 0 === a.length && 0 === t.closest(".ui-timepicker-wrapper").length && (H.hide(), e(document).unbind(".ui-timepicker")) } function o(e) { var i = e.data("timepicker-settings"); return (window.navigator.msMaxTouchPoints || "ontouchstart" in document) && i.disableTouchKeyboard } function c(i, t, a) { if (!a && 0 !== a) return !1; var r = i.data("timepicker-settings"), s = !1, n = 30 * r.step; return t.find("li").each(function (i, t) { var r = e(t); if ("number" == typeof r.data("time")) { var o = r.data("time") - a; return Math.abs(o) < n || o == n ? (s = r, !1) : void 0 } }), s } function l(e, i) { i.find("li").removeClass("ui-timepicker-selected"); var t = k(m(e)); if (null !== t) { var a = c(e, i, t); if (a) { var r = a.offset().top - i.offset().top; (r + a.outerHeight() > i.outerHeight() || 0 > r) && i.scrollTop(i.scrollTop() + a.position().top - a.outerHeight()), a.addClass("ui-timepicker-selected") } } } function u(i) { if ("" !== this.value) { var t = e(this); if (t.data("timepicker-list"), !t.is(":focus") || i && "change" == i.type) { var a = k(this.value); if (null === a) return t.trigger("timeFormatError"), void 0; var r = t.data("timepicker-settings"), s = !1; if (null !== r.minTime && a < r.minTime ? s = !0 : null !== r.maxTime && a > r.maxTime && (s = !0), e.each(r.disableTimeRanges, function () { return a >= this[0] && a < this[1] ? (s = !0, !1) : void 0 }), r.forceRoundTime) { var n = a % (60 * r.step); n < 30 * r.step ? a -= n : a += 60 * r.step - n } var o = v(a, r.timeFormat); s ? p(t, o, "error") && t.trigger("timeRangeError") : p(t, o) } } } function m(e) { return e.is("input") ? e.val() : e.data("ui-timepicker-value") } function p(e, i, t) { if (e.is("input")) { e.val(i); var a = e.data("timepicker-settings"); a.useSelect && e.data("timepicker-list").val(r(i, a)) } return e.data("ui-timepicker-value") != i ? (e.data("ui-timepicker-value", i), "select" == t ? e.trigger("selectTime").trigger("changeTime").trigger("change") : "error" != t && e.trigger("changeTime"), !0) : (e.trigger("selectTime"), !1) } function d(i) { var t = e(this), a = t.data("timepicker-list"); if (!a || !a.is(":visible")) { if (40 != i.keyCode) return !0; o(t) || t.focus() } switch (i.keyCode) { case 13: return h(t) && H.hide.apply(this), i.preventDefault(), !1; case 38: var r = a.find(".ui-timepicker-selected"); return r.length ? r.is(":first-child") || (r.removeClass("ui-timepicker-selected"), r.prev().addClass("ui-timepicker-selected"), r.prev().position().top < r.outerHeight() && a.scrollTop(a.scrollTop() - r.outerHeight())) : (a.find("li").each(function (i, t) { return e(t).position().top > 0 ? (r = e(t), !1) : void 0 }), r.addClass("ui-timepicker-selected")), !1; case 40: return r = a.find(".ui-timepicker-selected"), 0 === r.length ? (a.find("li").each(function (i, t) { return e(t).position().top > 0 ? (r = e(t), !1) : void 0 }), r.addClass("ui-timepicker-selected")) : r.is(":last-child") || (r.removeClass("ui-timepicker-selected"), r.next().addClass("ui-timepicker-selected"), r.next().position().top + 2 * r.outerHeight() > a.outerHeight() && a.scrollTop(a.scrollTop() + r.outerHeight())), !1; case 27: a.find("li").removeClass("ui-timepicker-selected"), H.hide(); break; case 9: H.hide(); break; default: return !0 } } function f(i) { var t = e(this), a = t.data("timepicker-list"); if (!a || !a.is(":visible")) return !0; if (!t.data("timepicker-settings").typeaheadHighlight) return a.find("li").removeClass("ui-timepicker-selected"), !0; switch (i.keyCode) { case 96: case 97: case 98: case 99: case 100: case 101: case 102: case 103: case 104: case 105: case 48: case 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57: case 65: case 77: case 80: case 186: case 8: case 46: l(t, a); break; default: return } } function h(e) { var i = e.data("timepicker-settings"), t = e.data("timepicker-list"), a = null, r = t.find(".ui-timepicker-selected"); if (r.hasClass("ui-timepicker-disabled")) return !1; if (r.length ? a = r.data("time") : m(e) && (a = k(m(e)), l(e, t)), null !== a) if ("string" == typeof a) e.val(a); else { var s = v(a, i.timeFormat); p(e, s, "select") } return !0 } function g(e) { var i, t = Math.round(e / 60); if (Math.abs(t) < 60) i = [t, x.mins]; else if (60 == t) i = ["1", x.hr]; else { var a = (t / 60).toFixed(1); "." != x.decimal && (a = a.replace(".", x.decimal)), i = [a, x.hrs] } return i.join(" ") } function v(e, i) { if (null !== e) { if (86400 == e) return "24:00"; var t = new Date(b.valueOf() + 1e3 * e); if (!isNaN(t.getTime())) { for (var a, r, s = "", n = 0; n < i.length; n++) switch (r = i.charAt(n)) { case "a": s += t.getHours() > 11 ? x.pm : x.am; break; case "A": s += t.getHours() > 11 ? x.PM : x.AM; break; case "g": a = t.getHours() % 12, s += 0 === a ? "12" : a; break; case "G": s += t.getHours(); break; case "h": a = t.getHours() % 12, 0 !== a && 10 > a && (a = "0" + a), s += 0 === a ? "12" : a; break; case "H": a = t.getHours(), e === y && (a = 24), s += a > 9 ? a : "0" + a; break; case "i": var o = t.getMinutes(); s += o > 9 ? o : "0" + o; break; case "s": e = t.getSeconds(), s += e > 9 ? e : "0" + e; break; default: s += r } return s } } } function k(e) { if ("" === e) return null; if (!e || e + 0 == e) return e; "object" == typeof e && (e = e.getHours() + ":" + T(e.getMinutes()) + ":" + T(e.getSeconds())), e = e.toLowerCase(), new Date(0); var i; if (-1 === e.indexOf(":") ? (i = e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/), i || (i = e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))) : i = e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/), !i) return null; var t, a = parseInt(1 * i[1], 10); t = i[4] ? 12 == a ? "p" == i[4] ? 12 : 0 : a + ("p" == i[4] ? 12 : 0) : a; var r = 1 * i[2] || 0, s = 1 * i[3] || 0; return 3600 * t + 60 * r + s } function T(e) { return ("0" + e).slice(-2) } var b = s(), y = 86400, w = { className: null, minTime: null, maxTime: null, durationTime: null, step: 30, showDuration: !1, timeFormat: "g:ia", scrollDefaultNow: !1, scrollDefaultTime: !1, selectOnBlur: !1, disableTouchKeyboard: !1, forceRoundTime: !1, appendTo: "body", orientation: "ltr", disableTimeRanges: [], closeOnWindowScroll: !1, typeaheadHighlight: !0, noneOption: !1 }, x = { am: "am", pm: "pm", AM: "AM", PM: "PM", decimal: ".", mins: "mins", hr: "hr", hrs: "hrs" }, H = { init: function (a) { return this.each(function () { var r = e(this), s = []; for (var n in w) r.data(n) && (s[n] = r.data(n)); var o = e.extend({}, w, s, a); o.lang && (x = e.extend(x, o.lang)), o = i(o), r.data("timepicker-settings", o), r.addClass("ui-timepicker-input"), o.useSelect ? t(r) : (r.prop("autocomplete", "off"), r.on("click.timepicker focus.timepicker", H.show), r.on("change.timepicker", u), r.on("keydown.timepicker", d), r.on("keyup.timepicker", f), u.call(r.get(0))) }) }, show: function (i) { i && i.preventDefault(); var a = e(this), r = a.data("timepicker-settings"); if (r.useSelect) return a.data("timepicker-list").focus(), void 0; o(a) && a.blur(); var s = a.data("timepicker-list"); if (!a.prop("readonly") && (s && 0 !== s.length && "function" != typeof r.durationTime || (t(a), s = a.data("timepicker-list")), !s.is(":visible"))) { H.hide(), s.show(); var l = {}; l.left = "rtl" == r.orientation ? a.offset().left + a.outerWidth() - s.outerWidth() + parseInt(s.css("marginLeft").replace("px", ""), 10) : a.offset().left + parseInt(s.css("marginLeft").replace("px", ""), 10), l.top = a.offset().top + a.outerHeight(!0) + s.outerHeight() > e(window).height() + e(window).scrollTop() ? a.offset().top - s.outerHeight() + parseInt(s.css("marginTop").replace("px", ""), 10) : a.offset().top + a.outerHeight() + parseInt(s.css("marginTop").replace("px", ""), 10), s.offset(l); var u = s.find(".ui-timepicker-selected"); if (u.length || (m(a) ? u = c(a, s, k(m(a))) : r.scrollDefaultNow ? u = c(a, s, k(new Date)) : r.scrollDefaultTime !== !1 && (u = c(a, s, k(r.scrollDefaultTime)))), u && u.length) { var p = s.scrollTop() + u.position().top - u.outerHeight(); s.scrollTop(p) } else s.scrollTop(0); return e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker", n), r.closeOnWindowScroll && e(document).on("scroll.ui-timepicker", n), a.trigger("showTimepicker"), this } }, hide: function () { var i = e(this), t = i.data("timepicker-settings"); return t && t.useSelect && i.blur(), e(".ui-timepicker-wrapper:visible").each(function () { var i = e(this), t = i.data("timepicker-input"), a = t.data("timepicker-settings"); a && a.selectOnBlur && h(t), i.hide(), t.trigger("hideTimepicker") }), this }, option: function (a, r) { var s = this, n = s.data("timepicker-settings"), o = s.data("timepicker-list"); if ("object" == typeof a) n = e.extend(n, a); else if ("string" == typeof a && void 0 !== r) n[a] = r; else if ("string" == typeof a) return n[a]; return n = i(n), s.data("timepicker-settings", n), o && (o.remove(), s.data("timepicker-list", !1)), n.useSelect && t(s), this }, getSecondsFromMidnight: function () { return k(m(this)) }, getTime: function (e) { var i = this, t = m(i); if (!t) return null; e || (e = new Date); var a = k(t), r = new Date(e); return r.setHours(a / 3600), r.setMinutes(a % 3600 / 60), r.setSeconds(a % 60), r.setMilliseconds(0), r }, setTime: function (e) { var i = this, t = v(k(e), i.data("timepicker-settings").timeFormat); return p(i, t), i.data("timepicker-list") && l(i, i.data("timepicker-list")), this }, remove: function () { var e = this; if (e.hasClass("ui-timepicker-input")) return e.removeAttr("autocomplete", "off"), e.removeClass("ui-timepicker-input"), e.removeData("timepicker-settings"), e.off(".timepicker"), e.data("timepicker-list") && e.data("timepicker-list").remove(), e.removeData("timepicker-list"), this } }; e.fn.timepicker = function (i) { return this.length ? H[i] ? this.hasClass("ui-timepicker-input") ? H[i].apply(this, Array.prototype.slice.call(arguments, 1)) : this : "object" != typeof i && i ? (e.error("Method " + i + " does not exist on jQuery.timepicker"), void 0) : H.init.apply(this, arguments) : this } });